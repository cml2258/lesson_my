<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据可视化</title>
</head>
<body>
    <!-- html5 画布 -->
    <canvas id="canvas"></canvas>
    <!-- 阻塞行为，先执行前面js -->
    <script src="./index.js"></script>
    <script>
        // // 找到画布元素
        // const canvas = document.getElementById('canvas');
        // // 在html里面的盒子大小
        // canvas.style.width = 400 + 'px';
        // canvas.style.height = 200 + 'px';
        // // 绘制区域的大小
        // canvas.width = 400;
        // canvas.height = 200;
        // // 获取图形上下文
        // const context = canvas.getContext('2d');// 平面绘制
        // // 绘制API吧？ 画什么形状都有相应API
        // // context.fillStyle = 'red'; // 沾了红色的颜料
        // // context.strokeStyle = 'yellow'; // 描边使用的颜色
        // // context.lineWidth = 10; // 边框 10 
        // // context.strokeRect(0,0,100,100); //rect 正方形
        // // context.fillRect(5,5,95,95); // 填充

        // // context.fillStyle = 'black';
        // // context.font = '25px sans-serif';
        // // context.fillText('hello meiling❥(^_-)',150,100);

        // context.fillStyle ='red';
        // context.fillRect(0,0,50,50);

        // context.fillStyle = 'blue';
        // context.translate(50,50);// translate偏移，起始点是右下角的点
        // context.rotate(-Math.PI/6); //逆时针旋转30度
        // context.scale(2,3); //放大
        // context.fillRect(0,0,50,50);

        const canvas = document.getElementById('canvas'); // 找到画布
        canvas.style.width = containerWidth + 'px';
        canvas.style.height = containerHeight + 'px';
        // 清晰度 画画的大小可以重新定义
        canvas.width = containerWidth * 2;
        canvas.height = containerHeight * 2;

        const context = canvas.getContext('2d');//绘制的句柄
        context.scale(2,2); // 抵消将画布宽高设置为样式宽高两倍的影响

        context.translate(margin,margin); //将笔移到内容，忽略margin （0,0）-> 左上角

        for(const index of indices){
            const color = colors[index];
            const x = xs[index];
            const barHeight = barHeights[index];
            const value = values[index];

            context.fillStyle = color; //
            // 整个高度 - 你的高度 = 起始高度
            context.fillRect(x,y-barHeight,barWidth,barHeight);

            context.textAlign = 'center';//文字居中
            context.textBaseline = 'middle';
            context.fillStyle = "white";
            context.font = "25px sans-serif";
            context.fillText(value, x + barWidth / 2, y - barHeight / 2 );
        }
    </script>
</body>
</html>